
	INCLUDE	SHIKE2.INC
	INCLUDE	KBD.INC

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

	CSEG
	PUBLIC	GAME
	EXTRN	CLRSPR,LEVELINIT,MOBINIT,MOVINIT,NEWFRAME
	EXTRN	KBHIT,NEWMOV,SETCAMERA

GAME:   CALL	CLRSPR
	CALL	LEVELINIT
	CALL	MOBINIT
	CALL	MOVINIT

	LD	IX,MOV
	LD	HL,POINT
	CALL	NEWMOV
	LD	DE,MOV
	CALL	SETCAMERA

G.LOOP: CALL	NEWFRAME
	CALL	KBHIT
	CP	KB_ESC
	JR	NZ,G.LOOP
	RET


POINT:	DB	0		;LEVEL=0
	DW	0		;ROOM=0
	DB	0,0,0		;X=Y=Z=0

	DSEG
MOV:	DS	50		;TODO: TEMPORAL BUFFER

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

	CSEG
	PUBLIC	ENGINE

ENGINE:	RET

