
	INCLUDE	BIOS.INC
	INCLUDE	DATA.INC

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

	CSEG
	PUBLIC	GAME
	EXTRN	LEVELINIT,MOBINIT,MOVINIT,EDITOR,CHARINIT,TALKINIT,DOORINIT
	EXTRN	NEWFRAME,CHARACTER

	INCLUDE	EVENT.INC

GAME:	CALL	MOBINIT
	CALL	MOVINIT
	CALL	TALKINIT
	CALL	LEVELINIT
	CALL	CHARINIT
	CALL	DOORINIT

	LD	DE,0703H
	LD	(EDLEVEL),DE
	LD	(EDROOM),DE
	CALL	EDITOR

	EXTRN	EDLEVEL,EDROOM,FOCUSCAM,PLACE,USER,SETCAMOP

	LD	DE,(EDLEVEL)
	LD	BC,(EDROOM)
	LD	(P1+POINT.LEVEL),DE
	LD	(P1+POINT.ROOM),BC

	LD	IX,CHR1
	LD	E,0
	LD	BC,USER
	CALL	CHARACTER
	LD	DE,P1
	LD	C,0
	CALL	PLACE
	CALL	SETCAMOP

G.LOOP:	CALL	NEWFRAME
	LD	A,(FINISH)
	OR	A
	JR	Z,G.LOOP

	RET

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

	PUBLIC	ENGINE
	EXTRN	THINK,ANIMATE

ENGINE:	CALL	THINK
	CALL	ANIMATE
	RET

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

	DSEG
	PUBLIC	FINISH,EDRUN

FINISH:	DB	0
EDRUN:	DB	0
CHR1:	DS	SIZCHAR
P1:	DW	0,0
	DB	0,0,0

